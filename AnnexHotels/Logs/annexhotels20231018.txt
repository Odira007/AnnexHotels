2023-10-18 08:35:43.423 +01:00 [INF] Now listening on: https://localhost:5001
2023-10-18 08:35:45.479 +01:00 [INF] Now listening on: http://localhost:5000
2023-10-18 08:35:45.550 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-18 08:35:45.554 +01:00 [INF] Hosting environment: Development
2023-10-18 08:35:45.558 +01:00 [INF] Content root path: C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels
2023-10-18 08:36:37.187 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/ - -
2023-10-18 08:36:42.918 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/ - - - 404 0 - 5804.0501ms
2023-10-18 08:39:13.927 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger - -
2023-10-18 08:39:19.259 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger - - - 301 0 - 5331.9205ms
2023-10-18 08:39:22.400 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2023-10-18 08:39:25.715 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 3322.4576ms
2023-10-18 08:39:26.467 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css - -
2023-10-18 08:39:26.528 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js - -
2023-10-18 08:39:26.529 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - -
2023-10-18 08:39:28.221 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2023-10-18 08:39:28.229 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css - - - 200 142933 text/css 1761.9931ms
2023-10-18 08:39:28.234 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2023-10-18 08:39:28.246 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - - - 200 311804 application/javascript 1718.5013ms
2023-10-18 08:39:30.419 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2023-10-18 08:39:30.425 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js - - - 200 986342 application/javascript 3897.6886ms
2023-10-18 08:39:41.570 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png - -
2023-10-18 08:39:41.809 +01:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2023-10-18 08:39:41.815 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png - - - 200 628 image/png 245.3095ms
2023-10-18 08:39:55.477 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2023-10-18 08:39:59.146 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 3669.1972ms
2023-10-18 08:43:09.923 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/customers - -
2023-10-18 08:43:10.160 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 08:43:16.795 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 08:44:04.615 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 08:46:59.013 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/customers application/json-patch+json 169
2023-10-18 08:46:59.028 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 08:46:59.643 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 08:47:05.621 +01:00 [ERR] Failed executing DbCommand (5,606ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 08:47:21.833 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 08:47:22.657 +01:00 [INF] A new customer has been added at 18/10/2023 07:44:42
2023-10-18 08:47:27.511 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Salt'.
Invalid column name 'SaltHashedPassword'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:61451979-3731-4035-9a0c-5267618f6007
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Salt'.
Invalid column name 'SaltHashedPassword'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:61451979-3731-4035-9a0c-5267618f6007
Error Number:207,State:1,Class:16
2023-10-18 08:47:31.061 +01:00 [ERR] Failed executing DbCommand (5,727ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 08:47:31.365 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 254552.4431ms
2023-10-18 08:47:31.427 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Salt'.
Invalid column name 'SaltHashedPassword'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:61451979-3731-4035-9a0c-5267618f6007
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Salt'.
Invalid column name 'SaltHashedPassword'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:61451979-3731-4035-9a0c-5267618f6007
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 08:47:31.724 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 08:47:31.872 +01:00 [INF] The customer could not be created
2023-10-18 08:47:32.120 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 08:47:32.255 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 32549.9597ms
2023-10-18 08:47:32.261 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 08:47:32.267 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtRouteResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.ObjectResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-10-18 08:47:32.876 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/customers application/json-patch+json 169 - 500 - text/plain 33863.1500ms
2023-10-18 08:47:32.056 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Salt'.
Invalid column name 'SaltHashedPassword'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AnnexHotels.Data.Repositories.CustomerRepository.GetCustomersAsync() in C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels.Data\Repositories\CustomerRepository.cs:line 46
   at AnnexHotels.Core.Implementations.CustomerService.GetCustomers() in C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels.Core\Implementations\CustomerService.cs:line 49
   at AnnexHotels.Controllers.CustomerController.GetCustomers() in C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels\Controllers\CustomerController.cs:line 39
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:61451979-3731-4035-9a0c-5267618f6007
Error Number:207,State:1,Class:16
2023-10-18 08:47:33.629 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/customers - - - 500 - text/plain 263705.6176ms
2023-10-18 09:00:22.565 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 09:02:43.373 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 09:06:59.049 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 09:07:41.296 +01:00 [INF] Executed DbCommand (183ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-10-18 09:07:42.024 +01:00 [INF] Executed DbCommand (661ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-10-18 09:07:42.032 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-10-18 09:07:42.034 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-10-18 09:07:42.259 +01:00 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-10-18 09:07:42.373 +01:00 [INF] Applying migration '20231018080244_SaltAndHashAdded'.
2023-10-18 09:07:42.991 +01:00 [INF] Executed DbCommand (255ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Customers] ADD [Salt] nvarchar(max) NULL;
2023-10-18 09:07:43.008 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Customers] ADD [SaltHashedPassword] nvarchar(max) NULL;
2023-10-18 09:07:43.232 +01:00 [INF] Executed DbCommand (223ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Bookings] SET [CheckOutDate] = '2023-10-23T09:02:42.2508971+01:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.233 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Bookings] SET [CheckOutDate] = '2023-10-25T09:02:42.2510052+01:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.234 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Bookings] SET [CheckOutDate] = '2023-11-01T09:02:42.2510087+01:00'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.235 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Bookings] SET [CheckOutDate] = '2023-10-24T09:02:42.2510092+01:00'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.236 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Bookings] SET [CheckOutDate] = '2023-10-27T09:02:42.2510097+01:00'
WHERE [Id] = 5;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.237 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Bookings] SET [CheckOutDate] = '2023-10-27T09:02:42.2510101+01:00'
WHERE [Id] = 6;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.248 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Companies] SET [CreatedAt] = '2023-10-18T09:02:42.2171676+01:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.249 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Companies] SET [CreatedAt] = '2023-10-18T09:02:42.2492672+01:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.250 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Companies] SET [CreatedAt] = '2023-10-18T09:02:42.2492777+01:00'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.360 +01:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Customers] SET [CreatedAt] = '2023-10-18T09:02:42.2501207+01:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.361 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Customers] SET [CreatedAt] = '2023-10-18T09:02:42.2505073+01:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.362 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Customers] SET [CreatedAt] = '2023-10-18T09:02:42.2505092+01:00'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.363 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Customers] SET [CreatedAt] = '2023-10-18T09:02:42.2505096+01:00'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-10-18 09:07:43.366 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231018080244_SaltAndHashAdded', N'5.0.17');
2023-10-18 09:56:51.075 +01:00 [INF] Now listening on: https://localhost:5001
2023-10-18 09:56:51.600 +01:00 [INF] Now listening on: http://localhost:5000
2023-10-18 09:56:51.606 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-18 09:56:51.612 +01:00 [INF] Hosting environment: Development
2023-10-18 09:56:51.618 +01:00 [INF] Content root path: C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels
2023-10-18 09:59:12.261 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger - -
2023-10-18 09:59:19.080 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger - - - 301 0 - 6809.6850ms
2023-10-18 09:59:19.213 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2023-10-18 09:59:20.432 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 1217.1759ms
2023-10-18 09:59:44.143 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2023-10-18 09:59:45.748 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 1605.0032ms
2023-10-18 09:59:49.989 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers/1 - -
2023-10-18 09:59:50.602 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomerById (AnnexHotels)'
2023-10-18 09:59:52.104 +01:00 [INF] Route matched with {action = "GetCustomerById", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] GetCustomerById(Int32, Boolean) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 10:00:02.559 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 10:01:24.611 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/customers - -
2023-10-18 10:01:24.634 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 10:01:24.661 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 10:01:24.844 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 10:01:53.295 +01:00 [INF] Executed DbCommand (3,153ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 10:01:53.295 +01:00 [INF] Executed DbCommand (3,250ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__customerId_0
2023-10-18 10:01:53.663 +01:00 [INF] The customer with the id: 1 and was fetched
2023-10-18 10:01:53.707 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 10:01:53.707 +01:00 [INF] Executing ObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 10:01:55.069 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 30383.6951ms
2023-10-18 10:01:55.115 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 10:01:55.207 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/customers - - - 200 804 application/json;+charset=utf-8 30597.2379ms
2023-10-18 10:01:55.311 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomerById (AnnexHotels) in 123189.4765ms
2023-10-18 10:01:55.318 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomerById (AnnexHotels)'
2023-10-18 10:01:55.324 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers/1 - - - 200 202 application/json;+charset=utf-8 125335.4670ms
2023-10-18 10:05:12.140 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers text/plain 263
2023-10-18 10:05:12.146 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 10:05:12.155 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 10:05:12.404 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-10-18 10:05:12.676 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 511.3943ms
2023-10-18 10:05:12.724 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 10:05:12.749 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers text/plain 263 - 415 175 application/problem+json;+charset=utf-8 609.5921ms
2023-10-18 12:14:54.091 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 263
2023-10-18 12:14:54.166 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 12:14:54.171 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 12:15:29.258 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 12:15:30.150 +01:00 [INF] A new customer has been added at 18/10/2023 09:02:42
2023-10-18 12:17:32.164 +01:00 [ERR] An error occurred using the connection to database 'AnnexHotels-1EG097675-6784-4A23-890Y6' on server '(localdb)\mssqllocaldb'.
2023-10-18 12:17:51.259 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=117295; handshake=463; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
ClientConnectionId:6e6c14d5-fda8-4b9e-8726-659fe30a063e
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=117295; handshake=463; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
ClientConnectionId:6e6c14d5-fda8-4b9e-8726-659fe30a063e
Error Number:-2,State:0,Class:11
2023-10-18 12:18:09.535 +01:00 [INF] The customer could not be created
2023-10-18 12:18:10.058 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 12:18:16.994 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 202689.7888ms
2023-10-18 12:18:17.207 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 12:18:17.890 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtRouteResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.ObjectResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-10-18 12:18:21.227 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 263 - 500 - text/plain 207084.4119ms
2023-10-18 12:22:01.966 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/hotels?companyId=1 application/json-patch+json 83
2023-10-18 12:22:01.971 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.HotelController.CreateHotel (AnnexHotels)'
2023-10-18 12:22:02.944 +01:00 [INF] Route matched with {action = "CreateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.HotelDto.HotelRequestDto]] CreateHotel(Int32, AnnexHotels.Dtos.HotelDto.HotelCreationDto) on controller AnnexHotels.Controllers.HotelController (AnnexHotels).
2023-10-18 12:22:08.261 +01:00 [INF] Executed action AnnexHotels.Controllers.HotelController.CreateHotel (AnnexHotels) in 5260.3934ms
2023-10-18 12:22:08.320 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.HotelController.CreateHotel (AnnexHotels)'
2023-10-18 12:22:08.332 +01:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
HotelCreationDto -> Hotel
AnnexHotels.Dtos.HotelDto.HotelCreationDto -> AnnexHotels.Models.Hotel
   at lambda_method281(Closure , Object , Hotel , ResolutionContext )
   at AnnexHotels.Core.Implementations.HotelService.AddHotel(Int32 companyId, HotelCreationDto hotel) in C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels.Core\Implementations\HotelService.cs:line 47
   at AnnexHotels.Controllers.HotelController.CreateHotel(Int32 companyId, HotelCreationDto hotel) in C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels\Controllers\HotelController.cs:line 50
   at lambda_method267(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-10-18 12:22:11.494 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/hotels?companyId=1 application/json-patch+json 83 - 500 - text/plain 9527.8735ms
2023-10-18 18:57:04.558 +01:00 [INF] Now listening on: https://localhost:5001
2023-10-18 18:57:05.671 +01:00 [INF] Now listening on: http://localhost:5000
2023-10-18 18:57:05.680 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-18 18:57:05.687 +01:00 [INF] Hosting environment: Development
2023-10-18 18:57:05.695 +01:00 [INF] Content root path: C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels
2023-10-18 19:13:44.062 +01:00 [INF] Now listening on: https://localhost:5001
2023-10-18 19:13:44.300 +01:00 [INF] Now listening on: http://localhost:5000
2023-10-18 19:13:44.306 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-18 19:13:44.310 +01:00 [INF] Hosting environment: Development
2023-10-18 19:13:44.314 +01:00 [INF] Content root path: C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels
2023-10-18 19:14:27.949 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 263
2023-10-18 19:14:28.400 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 19:14:28.757 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:14:30.339 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2023-10-18 19:14:33.978 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 3610.4766ms
2023-10-18 19:15:04.016 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2023-10-18 19:15:04.314 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:15:04.890 +01:00 [INF] A new customer has been added at 18/10/2023 09:02:42
2023-10-18 19:15:04.806 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "PUT api/hotels/{hotelId}/rooms/{roomId}" for actions - AnnexHotels.Controllers.RoomController.UpdateRoom (AnnexHotels),AnnexHotels.Controllers.RoomController.UpdatePartialRoom (AnnexHotels). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-10-18 19:15:09.620 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 500 - text/plain 5603.9871ms
2023-10-18 19:15:31.424 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2023-10-18 19:15:31.430 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 5.9607ms
2023-10-18 19:15:32.538 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2023-10-18 19:15:32.553 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "PUT api/hotels/{hotelId}/rooms/{roomId}" for actions - AnnexHotels.Controllers.RoomController.UpdateRoom (AnnexHotels),AnnexHotels.Controllers.RoomController.UpdatePartialRoom (AnnexHotels). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-10-18 19:15:32.561 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 500 - text/plain 23.0287ms
2023-10-18 19:15:47.199 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2023-10-18 19:15:47.246 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 46.7478ms
2023-10-18 19:15:48.052 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2023-10-18 19:15:48.069 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "PUT api/hotels/{hotelId}/rooms/{roomId}" for actions - AnnexHotels.Controllers.RoomController.UpdateRoom (AnnexHotels),AnnexHotels.Controllers.RoomController.UpdatePartialRoom (AnnexHotels). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-10-18 19:15:48.082 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 500 - text/plain 30.0453ms
2023-10-18 19:16:29.182 +01:00 [ERR] Failed executing DbCommand (9,779ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 19:16:29.701 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b7117051-07c6-42fe-950c-caecd5d9dc6f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b7117051-07c6-42fe-950c-caecd5d9dc6f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 19:16:31.272 +01:00 [INF] The customer could not be created
2023-10-18 19:16:31.319 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 19:16:31.741 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 122969.4052ms
2023-10-18 19:16:31.751 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 19:16:31.765 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 263 - 200 205 application/json;+charset=utf-8 123892.0721ms
2023-10-18 19:21:01.441 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 263
2023-10-18 19:21:01.475 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:21:01.543 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:21:01.766 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:21:02.995 +01:00 [INF] Executed DbCommand (410ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 19:21:03.116 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:21:03.125 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 1574.8215ms
2023-10-18 19:21:03.131 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:21:03.137 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 263 - 200 804 application/json;+charset=utf-8 1696.2722ms
2023-10-18 19:21:51.360 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 249
2023-10-18 19:21:51.381 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 19:21:51.386 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:21:51.413 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:21:51.421 +01:00 [INF] A new customer has been added at 18/10/2023 09:02:42
2023-10-18 19:21:51.434 +01:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 19:21:51.447 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b7117051-07c6-42fe-950c-caecd5d9dc6f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b7117051-07c6-42fe-950c-caecd5d9dc6f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 19:21:51.809 +01:00 [INF] The customer could not be created
2023-10-18 19:21:51.815 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 19:21:51.824 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 429.402ms
2023-10-18 19:21:51.879 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 19:21:51.885 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 249 - 200 205 application/json;+charset=utf-8 525.1232ms
2023-10-18 19:22:13.829 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 249
2023-10-18 19:22:13.855 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:22:13.867 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:22:13.877 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:22:13.918 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 19:22:13.928 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:22:13.938 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 62.5703ms
2023-10-18 19:22:13.951 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:22:13.961 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 249 - 200 804 application/json;+charset=utf-8 132.5073ms
2023-10-18 19:36:22.889 +01:00 [INF] Now listening on: https://localhost:5001
2023-10-18 19:36:23.246 +01:00 [INF] Now listening on: http://localhost:5000
2023-10-18 19:36:23.251 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-18 19:36:23.257 +01:00 [INF] Hosting environment: Development
2023-10-18 19:36:23.285 +01:00 [INF] Content root path: C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels
2023-10-18 19:36:41.626 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2023-10-18 19:36:42.270 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 686.6273ms
2023-10-18 19:36:58.640 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2023-10-18 19:36:59.602 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 962.4892ms
2023-10-18 19:38:20.946 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 249
2023-10-18 19:38:21.123 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 19:38:21.383 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:38:25.489 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:38:25.656 +01:00 [INF] A new customer has been added at 18/10/2023 09:02:42
2023-10-18 19:39:42.039 +01:00 [ERR] Failed executing DbCommand (9,389ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 19:39:47.506 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:85877305-1dbd-48e8-aca8-c1eb6c5d8a80
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:85877305-1dbd-48e8-aca8-c1eb6c5d8a80
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 19:39:49.205 +01:00 [INF] The customer could not be created
2023-10-18 19:39:49.263 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 19:39:49.853 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 88444.4305ms
2023-10-18 19:39:49.917 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 19:39:49.931 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 249 - 200 205 application/json;+charset=utf-8 88985.4153ms
2023-10-18 19:41:42.959 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 249
2023-10-18 19:41:42.968 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:41:42.993 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:41:43.071 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:41:44.284 +01:00 [INF] Executed DbCommand (590ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 19:41:44.408 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:41:44.417 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 1415.9423ms
2023-10-18 19:41:44.424 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:41:44.434 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 249 - 200 804 application/json;+charset=utf-8 1475.0229ms
2023-10-18 19:42:42.923 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/2 application/json 249
2023-10-18 19:42:42.958 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:42:42.989 +01:00 [INF] Route matched with {action = "GetRoomByHotelId", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.RoomDtos.RoomDto]] GetRoomByHotelId(Int32, Int32) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:42:43.082 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:42:43.381 +01:00 [INF] Executed DbCommand (216ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:42:43.616 +01:00 [INF] Executed DbCommand (109ms) [Parameters=[@__hotelId_0='?' (DbType = Int32), @__roomId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[HotelId] = @__hotelId_0) AND ([r].[Id] = @__roomId_1)
2023-10-18 19:42:43.634 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32), @__hotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[Id] = @__id_0) AND ([r].[HotelId] = @__hotelId_1)
2023-10-18 19:42:43.651 +01:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2023-10-18 19:42:43.659 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels) in 662.5531ms
2023-10-18 19:42:43.664 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:42:43.668 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/2 application/json 249 - 204 0 - 745.4530ms
2023-10-18 19:42:54.494 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/2 application/json 249
2023-10-18 19:42:54.498 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:42:54.502 +01:00 [INF] Route matched with {action = "GetRoomByHotelId", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.RoomDtos.RoomDto]] GetRoomByHotelId(Int32, Int32) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:42:54.508 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:42:54.539 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:42:54.549 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hotelId_0='?' (DbType = Int32), @__roomId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[HotelId] = @__hotelId_0) AND ([r].[Id] = @__roomId_1)
2023-10-18 19:42:54.557 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32), @__hotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[Id] = @__id_0) AND ([r].[HotelId] = @__hotelId_1)
2023-10-18 19:42:54.568 +01:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2023-10-18 19:42:54.573 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels) in 65.7331ms
2023-10-18 19:42:54.577 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:42:54.581 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/2 application/json 249 - 204 0 - 87.4976ms
2023-10-18 19:43:03.090 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/1 application/json 249
2023-10-18 19:43:03.097 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:43:03.103 +01:00 [INF] Route matched with {action = "GetRoomByHotelId", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.RoomDtos.RoomDto]] GetRoomByHotelId(Int32, Int32) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:43:03.115 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:43:03.215 +01:00 [INF] Executed DbCommand (89ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:43:03.233 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__hotelId_0='?' (DbType = Int32), @__roomId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[HotelId] = @__hotelId_0) AND ([r].[Id] = @__roomId_1)
2023-10-18 19:43:03.285 +01:00 [INF] The room with the Id: 1 could not be found
2023-10-18 19:43:03.297 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32), @__hotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[Id] = @__id_0) AND ([r].[HotelId] = @__hotelId_1)
2023-10-18 19:43:03.311 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.RoomDtos.RoomDto'.
2023-10-18 19:43:03.329 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels) in 218.337ms
2023-10-18 19:43:03.345 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:43:03.350 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/1 application/json 249 - 200 139 application/json;+charset=utf-8 260.3605ms
2023-10-18 19:44:46.611 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms application/json 249
2023-10-18 19:44:46.617 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:44:46.627 +01:00 [INF] Route matched with {action = "GetRoomByHotelId", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.RoomDtos.RoomDto]]] GetRoomByHotelId(Int32) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:44:46.688 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:44:46.707 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:44:47.152 +01:00 [INF] Executed DbCommand (400ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[RoomNumber]
2023-10-18 19:44:47.169 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.RoomDtos.RoomDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:44:47.183 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels) in 548.9398ms
2023-10-18 19:44:47.208 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:44:47.224 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms application/json 249 - 200 422 application/json;+charset=utf-8 612.3435ms
2023-10-18 19:45:45.349 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2 application/json 249
2023-10-18 19:45:45.388 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.HotelController.GetHotelById (AnnexHotels)'
2023-10-18 19:45:45.399 +01:00 [INF] Route matched with {action = "GetHotelById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.HotelDto.HotelWithoutRoomsDto]] GetHotelById(Int32, Boolean) on controller AnnexHotels.Controllers.HotelController (AnnexHotels).
2023-10-18 19:45:45.415 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:45:45.424 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:45:45.435 +01:00 [INF] Executing ObjectResult, writing value of type 'AnnexHotels.Dtos.HotelDto.HotelWithoutRoomsDto'.
2023-10-18 19:45:45.444 +01:00 [INF] Executed action AnnexHotels.Controllers.HotelController.GetHotelById (AnnexHotels) in 36.7759ms
2023-10-18 19:45:45.744 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.HotelController.GetHotelById (AnnexHotels)'
2023-10-18 19:45:45.750 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2 application/json 249 - 200 170 application/json;+charset=utf-8 401.4040ms
2023-10-18 19:46:03.087 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/1 application/json 249
2023-10-18 19:46:03.091 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:46:03.098 +01:00 [INF] Route matched with {action = "GetRoomByHotelId", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.RoomDtos.RoomDto]] GetRoomByHotelId(Int32, Int32) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:46:03.105 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:46:03.111 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:46:03.123 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hotelId_0='?' (DbType = Int32), @__roomId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[HotelId] = @__hotelId_0) AND ([r].[Id] = @__roomId_1)
2023-10-18 19:46:03.130 +01:00 [INF] The room with the Id: 1 could not be found
2023-10-18 19:46:03.137 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32), @__hotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[Id] = @__id_0) AND ([r].[HotelId] = @__hotelId_1)
2023-10-18 19:46:03.145 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.RoomDtos.RoomDto'.
2023-10-18 19:46:03.152 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels) in 48.1735ms
2023-10-18 19:46:03.158 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:46:03.166 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/1 application/json 249 - 200 139 application/json;+charset=utf-8 79.3959ms
2023-10-18 19:48:57.093 +01:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:5001/api/hotels/2/rooms/1 application/json 201
2023-10-18 19:48:57.097 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.UpdatePartialRoom (AnnexHotels)'
2023-10-18 19:48:57.106 +01:00 [INF] Route matched with {action = "UpdatePartialRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePartialRoom(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[AnnexHotels.Dtos.RoomDtos.RoomUpdateDto]) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:48:57.300 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:48:57.335 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:48:57.358 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32), @__hotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[Id] = @__id_0) AND ([r].[HotelId] = @__hotelId_1)
2023-10-18 19:48:58.212 +01:00 [INF] Executed DbCommand (778ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rooms] SET [IsBooked] = @p0, [PricePerDay] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;
2023-10-18 19:48:58.279 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2023-10-18 19:48:58.283 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.UpdatePartialRoom (AnnexHotels) in 1170.1761ms
2023-10-18 19:48:58.289 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.UpdatePartialRoom (AnnexHotels)'
2023-10-18 19:48:58.297 +01:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:5001/api/hotels/2/rooms/1 application/json 201 - 204 - - 1211.5051ms
2023-10-18 19:49:07.171 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/1 application/json 201
2023-10-18 19:49:07.175 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:49:07.179 +01:00 [INF] Route matched with {action = "GetRoomByHotelId", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.RoomDtos.RoomDto]] GetRoomByHotelId(Int32, Int32) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:49:07.185 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:49:07.196 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:49:07.240 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[@__hotelId_0='?' (DbType = Int32), @__roomId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[HotelId] = @__hotelId_0) AND ([r].[Id] = @__roomId_1)
2023-10-18 19:49:07.246 +01:00 [INF] The room with the Id: 1 could not be found
2023-10-18 19:49:07.254 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32), @__hotelId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE ([r].[Id] = @__id_0) AND ([r].[HotelId] = @__hotelId_1)
2023-10-18 19:49:07.262 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.RoomDtos.RoomDto'.
2023-10-18 19:49:07.285 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels) in 101.3139ms
2023-10-18 19:49:07.291 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:49:07.301 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms/1 application/json 201 - 200 140 application/json;+charset=utf-8 130.0313ms
2023-10-18 19:49:28.780 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 201
2023-10-18 19:49:28.827 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:49:28.831 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:49:28.841 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:49:28.852 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 19:49:28.859 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:49:28.866 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 28.1658ms
2023-10-18 19:49:28.880 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:49:28.887 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 201 - 200 804 application/json;+charset=utf-8 107.5298ms
2023-10-18 19:50:04.602 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms application/json 201
2023-10-18 19:50:04.606 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:50:04.611 +01:00 [INF] Route matched with {action = "GetRoomByHotelId", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.RoomDtos.RoomDto]]] GetRoomByHotelId(Int32) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:50:04.618 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:50:04.633 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:50:04.648 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[RoomNumber]
2023-10-18 19:50:04.659 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.RoomDtos.RoomDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:50:04.665 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels) in 48.5643ms
2023-10-18 19:50:04.672 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:50:04.678 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms application/json 201 - 200 423 application/json;+charset=utf-8 76.2723ms
2023-10-18 19:51:53.090 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/hotels/2/rooms application/json 191
2023-10-18 19:51:53.102 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.AddRoom (AnnexHotels)'
2023-10-18 19:51:53.111 +01:00 [INF] Route matched with {action = "AddRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.RoomDtos.RoomDto]] AddRoom(Int32, AnnexHotels.Dtos.RoomDtos.RoomCreationDto) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:51:53.162 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:51:53.170 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:51:53.193 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__id_0
2023-10-18 19:51:53.459 +01:00 [INF] Executed DbCommand (203ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Rooms] ([BookingId], [HotelId], [IsBooked], [PricePerDay], [RoomNumber], [RoomType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Rooms]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 19:51:53.545 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.RoomDtos.RoomDto'.
2023-10-18 19:51:53.552 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.AddRoom (AnnexHotels) in 416.3397ms
2023-10-18 19:51:53.559 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.AddRoom (AnnexHotels)'
2023-10-18 19:51:53.564 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/hotels/2/rooms application/json 191 - 200 140 application/json;+charset=utf-8 475.7055ms
2023-10-18 19:52:05.480 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms application/json 191
2023-10-18 19:52:05.486 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:52:05.491 +01:00 [INF] Route matched with {action = "GetRoomByHotelId", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.RoomDtos.RoomDto]]] GetRoomByHotelId(Int32) on controller AnnexHotels.Controllers.RoomController (AnnexHotels).
2023-10-18 19:52:05.500 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:52:05.538 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[City], [h].[CompanyId], [h].[Country], [h].[Description], [h].[Name], [h].[Status]
FROM [Hotels] AS [h]
WHERE [h].[Id] = @__hotelId_0
2023-10-18 19:52:05.601 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[BookingId], [r].[HotelId], [r].[IsBooked], [r].[PricePerDay], [r].[RoomNumber], [r].[RoomType]
FROM [Rooms] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
ORDER BY [r].[RoomNumber]
2023-10-18 19:52:05.618 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.RoomDtos.RoomDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:52:05.626 +01:00 [INF] Executed action AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels) in 129.0106ms
2023-10-18 19:52:05.633 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.RoomController.GetRoomByHotelId (AnnexHotels)'
2023-10-18 19:52:05.641 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/rooms application/json 191 - 200 564 application/json;+charset=utf-8 161.5605ms
2023-10-18 19:52:42.040 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/hotels/2/customers application/json 191
2023-10-18 19:52:42.046 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/hotels/2/customers application/json 191 - 404 0 - 5.1642ms
2023-10-18 19:53:06.793 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 191
2023-10-18 19:53:06.805 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:53:06.810 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:53:06.841 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:53:06.853 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 19:53:06.865 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:53:06.872 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 32.3247ms
2023-10-18 19:53:06.883 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:53:06.891 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 191 - 200 804 application/json;+charset=utf-8 100.3565ms
2023-10-18 19:54:41.109 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 248
2023-10-18 19:54:41.113 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 19:54:41.117 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:54:41.125 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:54:41.131 +01:00 [INF] A new customer has been added at 18/10/2023 09:02:42
2023-10-18 19:54:41.147 +01:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 19:54:41.168 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:85877305-1dbd-48e8-aca8-c1eb6c5d8a80
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:85877305-1dbd-48e8-aca8-c1eb6c5d8a80
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 19:54:41.466 +01:00 [INF] The customer could not be created
2023-10-18 19:54:41.486 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 19:54:41.490 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 367.6706ms
2023-10-18 19:54:41.495 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 19:54:41.501 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 248 - 200 204 application/json;+charset=utf-8 391.6759ms
2023-10-18 19:54:52.000 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 248
2023-10-18 19:54:52.004 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:54:52.008 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 19:54:52.017 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:54:52.027 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 19:54:52.034 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:54:52.040 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 23.4745ms
2023-10-18 19:54:52.049 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 19:54:52.054 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 248 - 200 804 application/json;+charset=utf-8 54.1313ms
2023-10-18 19:55:21.202 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/bookings application/json 248
2023-10-18 19:55:21.216 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.BookingController.GetBookings (AnnexHotels)'
2023-10-18 19:55:21.224 +01:00 [INF] Route matched with {action = "GetBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.BookingDtos.BookingDto]]] GetBookings() on controller AnnexHotels.Controllers.BookingController (AnnexHotels).
2023-10-18 19:58:10.514 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 19:58:10.577 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[BookingStatus], [b].[CheckInDate], [b].[CheckOutDate], [b].[CustomerId], [b].[HotelId]
FROM [Bookings] AS [b]
2023-10-18 19:58:10.638 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.BookingDtos.BookingDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 19:58:10.647 +01:00 [INF] Executed action AnnexHotels.Controllers.BookingController.GetBookings (AnnexHotels) in 169415.3413ms
2023-10-18 19:58:10.655 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.BookingController.GetBookings (AnnexHotels)'
2023-10-18 19:58:10.667 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/bookings application/json 248 - 200 613 application/json;+charset=utf-8 169464.3502ms
2023-10-18 20:41:21.495 +01:00 [INF] Now listening on: https://localhost:5001
2023-10-18 20:41:22.215 +01:00 [INF] Now listening on: http://localhost:5000
2023-10-18 20:41:22.243 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-18 20:41:22.247 +01:00 [INF] Hosting environment: Development
2023-10-18 20:41:22.278 +01:00 [INF] Content root path: C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels
2023-10-18 20:56:48.704 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 218
2023-10-18 20:56:49.422 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 20:56:49.954 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 20:56:54.090 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 20:57:11.763 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 217
2023-10-18 20:57:11.777 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 20:57:11.783 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 20:57:11.842 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 20:57:24.488 +01:00 [ERR] Failed executing DbCommand (3,176ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 20:57:24.488 +01:00 [ERR] Failed executing DbCommand (3,176ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 20:57:27.508 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:85047062-6892-42c4-ad58-b3f2077fe8a6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:85047062-6892-42c4-ad58-b3f2077fe8a6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 20:57:27.508 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:80c5dd9c-d27e-456b-bb7d-e22a98c88d4a
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:80c5dd9c-d27e-456b-bb7d-e22a98c88d4a
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 20:57:28.731 +01:00 [INF] The customer could not be created
2023-10-18 20:57:29.009 +01:00 [INF] The customer could not be created
2023-10-18 20:57:29.173 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 20:57:29.173 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 20:57:29.346 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 39377.4588ms
2023-10-18 20:57:29.394 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 20:57:29.434 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 17625.9022ms
2023-10-18 20:57:29.458 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 20:57:29.458 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 218 - 200 187 application/json;+charset=utf-8 40781.0919ms
2023-10-18 20:57:29.481 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 217 - 200 187 application/json;+charset=utf-8 17718.7059ms
2023-10-18 20:57:51.984 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 217
2023-10-18 20:57:52.108 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 20:57:52.179 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 20:57:52.319 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 20:57:53.540 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 20:57:53.686 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 20:57:53.694 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 1489.6732ms
2023-10-18 20:57:53.700 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 20:57:53.707 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 217 - 200 736 application/json;+charset=utf-8 1723.1067ms
2023-10-18 21:14:10.048 +01:00 [INF] Now listening on: https://localhost:5001
2023-10-18 21:14:10.292 +01:00 [INF] Now listening on: http://localhost:5000
2023-10-18 21:14:10.296 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-18 21:14:10.300 +01:00 [INF] Hosting environment: Development
2023-10-18 21:14:10.303 +01:00 [INF] Content root path: C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels
2023-10-18 21:17:09.899 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 217
2023-10-18 21:17:10.304 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:17:10.506 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 21:17:13.277 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 21:17:50.554 +01:00 [INF] Executed DbCommand (481ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 21:17:51.038 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 21:17:51.649 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 41124.118ms
2023-10-18 21:17:51.654 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:17:51.698 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 217 - 200 736 application/json;+charset=utf-8 41845.5045ms
2023-10-18 21:18:28.442 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 217
2023-10-18 21:18:28.449 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 21:18:28.526 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 21:18:29.050 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 21:18:30.843 +01:00 [ERR] Failed executing DbCommand (1,354ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 21:18:32.049 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:11755071-e24f-44f7-a2ad-c2d71e73ee77
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ConfirmPassword', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:11755071-e24f-44f7-a2ad-c2d71e73ee77
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 21:18:32.726 +01:00 [INF] The customer could not be created
2023-10-18 21:18:32.740 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 21:18:32.746 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 4193.6849ms
2023-10-18 21:18:32.753 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 21:18:32.759 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 217 - 200 187 application/json;+charset=utf-8 4317.2955ms
2023-10-18 21:18:45.434 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 217
2023-10-18 21:18:45.441 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:18:45.448 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 21:18:45.480 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 21:18:45.515 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 21:18:45.526 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 21:18:45.533 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 76.7884ms
2023-10-18 21:18:45.576 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:18:45.584 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 217 - 200 736 application/json;+charset=utf-8 150.4897ms
2023-10-18 21:46:13.154 +01:00 [INF] Now listening on: https://localhost:5001
2023-10-18 21:46:13.565 +01:00 [INF] Now listening on: http://localhost:5000
2023-10-18 21:46:13.570 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-18 21:46:13.576 +01:00 [INF] Hosting environment: Development
2023-10-18 21:46:13.581 +01:00 [INF] Content root path: C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels
2023-10-18 21:46:56.217 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 217
2023-10-18 21:46:56.647 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:46:56.988 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 21:47:00.179 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 21:47:47.353 +01:00 [ERR] An error occurred using the connection to database 'AnnexHotels-1EG097675-6784-4A23-890Y6' on server '(localdb)\mssqllocaldb'.
2023-10-18 21:47:52.395 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=43721; handshake=902; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d2843bba-0f13-431a-8328-bfba7c04a38f
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=43721; handshake=902; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d2843bba-0f13-431a-8328-bfba7c04a38f
Error Number:-2,State:0,Class:11
2023-10-18 21:47:55.274 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 58227.9525ms
2023-10-18 21:47:55.461 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:47:55.520 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=43721; handshake=902; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AnnexHotels.Data.Repositories.CustomerRepository.GetCustomersAsync() in C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels.Data\Repositories\CustomerRepository.cs:line 47
   at AnnexHotels.Core.Implementations.CustomerService.GetCustomers() in C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels.Core\Implementations\CustomerService.cs:line 51
   at AnnexHotels.Controllers.CustomerController.GetCustomers() in C:\Users\ODIRA.DESKTOP-II4QM4T\source\repos\AnnexHotels\AnnexHotels\Controllers\CustomerController.cs:line 35
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:d2843bba-0f13-431a-8328-bfba7c04a38f
Error Number:-2,State:0,Class:11
2023-10-18 21:47:59.214 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 217 - 500 - text/plain 63021.7840ms
2023-10-18 21:48:16.579 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 217
2023-10-18 21:48:16.587 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:48:16.596 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 21:48:16.699 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 21:48:19.963 +01:00 [INF] Executed DbCommand (553ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 21:48:20.448 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 21:48:21.648 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 5043.9886ms
2023-10-18 21:48:21.658 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:48:21.663 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 217 - 200 587 application/json;+charset=utf-8 5083.8581ms
2023-10-18 21:48:38.752 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/customers application/json 217
2023-10-18 21:48:38.758 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 21:48:38.941 +01:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]] Register(AnnexHotels.Dtos.CustomerDtos.CustomerCreationDto) on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 21:48:39.576 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 21:48:40.647 +01:00 [ERR] Failed executing DbCommand (669ms) [Parameters=[@p0='?' (Size = 25), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 25), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([ConfirmPassword], [CreatedAt], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Salt], [SaltHashedPassword])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-10-18 21:48:40.757 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'AnnexHotels.Data.DbContexts.AnnexHotelsDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Password', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:43f2fca1-10cd-4559-99af-e28c9a78b86a
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Password', table 'AnnexHotels-1EG097675-6784-4A23-890Y6.dbo.Customers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:43f2fca1-10cd-4559-99af-e28c9a78b86a
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-18 21:48:41.197 +01:00 [INF] The customer could not be created
2023-10-18 21:48:41.205 +01:00 [INF] Executing OkObjectResult, writing value of type 'AnnexHotels.Dtos.CustomerDtos.CustomerDto'.
2023-10-18 21:48:41.212 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.Register (AnnexHotels) in 2263.2822ms
2023-10-18 21:48:41.218 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.Register (AnnexHotels)'
2023-10-18 21:48:41.224 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/customers application/json 217 - 200 148 application/json;+charset=utf-8 2471.7098ms
2023-10-18 21:48:54.199 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/customers application/json 217
2023-10-18 21:48:54.217 +01:00 [INF] Executing endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:48:54.223 +01:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[AnnexHotels.Dtos.CustomerDtos.CustomerDto]]] GetCustomers() on controller AnnexHotels.Controllers.CustomerController (AnnexHotels).
2023-10-18 21:48:54.231 +01:00 [INF] Entity Framework Core 5.0.17 initialized 'AnnexHotelsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-10-18 21:48:54.241 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ConfirmPassword], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[LastName], [c].[Password], [c].[PhoneNumber], [c].[Salt], [c].[SaltHashedPassword]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
2023-10-18 21:48:54.252 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AnnexHotels.Dtos.CustomerDtos.CustomerDto, AnnexHotels.Dtos, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-18 21:48:54.259 +01:00 [INF] Executed action AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels) in 28.8073ms
2023-10-18 21:48:54.266 +01:00 [INF] Executed endpoint 'AnnexHotels.Controllers.CustomerController.GetCustomers (AnnexHotels)'
2023-10-18 21:48:54.276 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/customers application/json 217 - 200 587 application/json;+charset=utf-8 77.3978ms
